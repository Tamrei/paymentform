<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Widget castomizer</title>
    <link href="res/bootstrap.css" rel="stylesheet">

    <style></style>

</head>
<body>

<script>

</script>


<div class="widget-form">
    <div class="container bordered">

        <div class="header"></div>

        <div class="form-group">
            <!--
            <label for="order_desc">Order desc</label>
            <input type="text" name="order_desc" id="order_desc" placeholder="order_desc" class="order_desc">
            -->


            <form name="tocheckout" method="POST" action="https://api.fondy.eu/api/checkout/redirect/">
                <input type="text" name="server_callback_url" value="http://5.53.119.50:54355/">
                <input type="text" name="order_id" value="">
                <input type="text" name="order_desc" value="Test payment">
                <input type="text" name="currency" value="RUB">
                <input type="text" name="amount" value="100">
                <input type="text" name="signature" value="1773cf135bd89656131134b98637894dad42f808">
                <input type="text" name="merchant_id" value="1">
                <input type="text" name="product_id" value="37259338838">
                <input type="submit">
            </form>


        </div>
    </div>
</div>

<div class="container">

    <script src="https://api.fondy.eu/static_common/v1/checkout/ipsp.js"></script>
    <script>
        var button = $ipsp.get('button');
        button.setMerchantId(1396424);
        button.setAmount('', 'USD');
        button.setHost('http://5.53.119.50:54355');
    </script>
    <button onclick="location.href=button.getUrl()">Оплатить произвольную сумму2</button>

    <!--
    <form>
        <div class="form-group">
            <label for="order_desc">Order desc</label>
            <input type="text" name="order_desc" id="order_desc" placeholder="order_desc" class="form-control">
        </div>

        <div class="form-group">
            <label for="currency">Currency</label>
            <select class="form-control" id="currency" name="currency">
                <option>EUR</option>
                <option>RUB</option>
            </select>
        </div>

        <div class="form-group">
            <label for="amount">Amount</label>
            <input type="text" name="amount" id="amount" placeholder="amount" class="form-control">
        </div>

        <div class="form-group">
            <label for="signature">Signature</label>
            <input type="text" name="signature" id="signature" placeholder="signature" class="form-control">
        </div>

        <button type="button" class="btn btn-success" onclick="request()"> Request </button>
    </form>
    -->


    <div class="row">
        <div>
            <legend>Payment</legend>
        </div>
        <!-- panel preview -->

        <div>
            <form name="tocheckout" method="POST" action="https://api.fondy.eu/api/checkout/redirect/">
                <h4>Add payment:</h4>
                <div class="panel panel-default">
                    <div class="panel-body form-horizontal payment-form">
                        <div class="form-group">
                            <label for="order_id" class="col-sm-3 control-label">order_id</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="order_id" name="order_id">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="order_desc" class="col-sm-3 control-label">order_desc</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="order_desc" name="order_desc">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="amount" class="col-sm-3 control-label">amount</label>
                            <div class="col-sm-9">
                                <input type="number" class="form-control" id="amount" name="amount">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="currency" class="col-sm-3 control-label">currency</label>
                            <div class="col-sm-9">
                                <select class="form-control" id="currency" name="currency">
                                    <option>RUB</option>
                                    <option>EUR</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="signature" class="col-sm-3 control-label">signature</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="signature" name="signature">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="merchant_id" class="col-sm-3 control-label">merchant_id</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="merchant_id" name="merchant_id">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="product_id" class="col-sm-3 control-label">product_id</label>
                            <div class="col-sm-9">
                                <input type="text" class="form-control" id="product_id" name="product_id">
                            </div>
                        </div>

                        <input style="float:right;" type="submit" class="btn btn-default">

                    </div>
                </div>
            </form>
        </div> <!-- / panel preview -->
    </div>


</div>

<script>
    // EXAMPLE
    // http://jsfiddle.net/8h65h91t/


    function request2() {
        var orderDesc = document.getElementById("order_desc");
        var currency = document.getElementById("currency");
        var amount = document.getElementById("amount");
        var signature = document.getElementById("signature");
        var productID = document.getElementById("product_id");
        var merchantID = document.getElementById("merchant_id");


        var data = {
            //"request": {
            "order_id": "test123456",
            "order_desc": orderDesc.value,
            "currency": currency.value,
            "amount": amount.value,
            "signature": signature.value,
            "product_id": productID.value,
            //"merchant_id": merchantID.value,
            "merchant_id": "1396424"
            //}
        };

        var body =
                'order_id=' + "test123456" +
                '&order_desc=' + orderDesc.value +
                '&currency=' + currency.value +
                '&amount=' + amount.value +
                '$signature' + signature.value +
                '$merchant_id' + "1396424";


        var xmlhttp = new XMLHttpRequest();

        //var url = "https://api.fondy.eu/api/checkout/redirect/";
        var url = "https://api.fondy.eu/api/checkout/redirect/";
        xmlhttp.open('post', url, false);
        //xmlhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == XMLHttpRequest.DONE) {
                if (xmlhttp.status == 200) {
                    console.log(xmlhttp.status);
                } else {
                    console.log(xmlhttp.status);
                }
            }
        };
        //xmlhttp.send(JSON.stringify(data));
        xmlhttp.send(body);
    }

    function request() {
        var orderDesc = document.getElementById("order_desc");
        var currency = document.getElementById("currency");
        var amount = document.getElementById("amount");
        var signature = document.getElementById("signature");


        var data = {
            //"request": {
            "order_id": "test123456",
            "order_desc": orderDesc.value,
            "currency": currency.value,
            "amount": amount.value,
            "signature": signature.value,
            "merchant_id": "1396424"
            //}
        };

        var body =
                'order_id=' + "test123456" +
                '&order_desc=' + orderDesc.value +
                '&currency=' + currency.value +
                '&amount=' + amount.value +
                '$signature' + signature.value +
                '$merchant_id' + "1396424";


        var xmlhttp = new XMLHttpRequest();
        //https://api.fondy.eu/api/checkout/redirect/
        //var url = "https://api.fondy.eu/api/checkout/redirect/";
        var url = "http://shop.com/response/";
        xmlhttp.open('post', url, true);
        xmlhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == XMLHttpRequest.DONE) {
                if (xmlhttp.status == 200) {
                    console.log(xmlhttp.status);
                } else {
                    console.log(xmlhttp.status);
                }
            }
        };
        //xmlhttp.send(JSON.stringify(data));
        xmlhttp.send(body);
    }

    //request();
</script>

</body>
</html>